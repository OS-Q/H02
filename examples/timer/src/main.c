/*******************************************************************************
****版本：V1.0.0
****平台：STM8S
****日期：2021-01-12
****作者：Qitas
****版权：OS-Q
*******************************************************************************/
#include <stdint.h>
#include "stm8s.h"
#include "init.h"

volatile uint32_t time_ms_cnt=0;

void led_init(void)
{
    GPIOB->DDR|=0x20;
    GPIOB->CR1|=0x20;
    GPIOB->CR2|=0x00;
}

/*******************************************************************************
**函数信息 ：
**功能描述 ：
**输入参数 ：
**输出参数 ：
*******************************************************************************/
int main()
{
    // port_init();
    led_init();
    clk_init();
    tim1_init(16,1000);
    while (1)
    {
        if(time_ms_cnt%1000==0) GPIOB->ODR ^= 0x20;
    }
}

/*******************************************************************************
**函数信息 ：
**功能描述 ：
**输入参数 ：
**输出参数 ：
*******************************************************************************/

void tim1_isr(void) __interrupt(11)
{
    time_ms_cnt++;
    TIM1->SR1=0x00;
}

/*---------------------------(C) COPYRIGHT 2021 OS-Q -------------------------*/
